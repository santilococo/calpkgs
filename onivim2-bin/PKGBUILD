# Maintainer: Santiago Lo Coco <santilococo.01 at gmail dot com>

_pkgname="onivim2"
pkgname=onivim2-bin
pkgver=0.5.7
pkgrel=1
pkgdesc="Native, lightweight modal code editor."
arch=('x86_64')
url="https://github.com/santilococo/oni2"
license=('MIT')
provides=('onivim2')
conflicts=('onivim2')
source=("${url}/releases/download/v${pkgver}/AppDir.tar")
sha256sums=('38ea5928753466aa39af75ddee837c14eba5c763e329781764085f935d5d0fcf')

package() {
    cd "${srcdir}/_release/Onivim2.AppDir"

    install -dm755 "${pkgdir}/opt/${_pkgname}"
    install -Dm644 EULA.md "${pkgdir}/usr/share/licenses/${_pkgname}"
    install -Dm644 Onivim2.desktop "${pkgdir}/usr/share/applications/Onivim2.desktop"
    install -Dm644 Onivim2.png "${pkgdir}/usr/share/pixmaps/Onivim2.png"
    cp -Lr {AppRun,usr} "${pkgdir}/opt/${_pkgname}"
    ln -s /opt/onivim2/AppRun "${pkgdir}/usr/bin/Oni2"
}

