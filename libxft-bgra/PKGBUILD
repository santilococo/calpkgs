# Maintainer: Santiago Lo Coco <santilococo.01@gmail.com>

_pkgbasever=2.3.4
pkgname=libxft-bgra
pkgver=2.3.4
pkgrel=1
pkgdesc="libXft with BGRA glyph rendering and scaling patches by Maxime Coste"
arch=('x86_64')
license=('custom')
groups=('modified')
provides=('libxft')
conflicts=('libxft')
url="https://gitlab.freedesktop.org/xorg/lib/libxft/-/archive/libXft-${pkgver}/libxft-libXft-${pkgver}.tar.gz"
depends=('fontconfig' 'libxrender' 'xorg-util-macros')
makedepends=('git' 'pkgconf')
source=("${pkgname}-${pkgver}.tar.gz::$url" "bgra-patch::https://gitlab.freedesktop.org/xorg/lib/libxft/merge_requests/1.patch")
md5sums=('SKIP' 'SKIP')


build() {
    cd "$srcdir/libxft-libXft-${pkgver}"
    patch -p1 < "$srcdir/bgra-patch"
    sh autogen.sh --sysconfdir=/etc --prefix=/usr --mandir=/usr/share/man
    make
}

package() {
    cd "$srcdir/libxft-libXft-${pkgver}"
    make DESTDIR="${pkgdir}" install
    install -d -m755 "${pkgdir}/usr/share/licenses/${pkgname}"
    install -m644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/"
}
